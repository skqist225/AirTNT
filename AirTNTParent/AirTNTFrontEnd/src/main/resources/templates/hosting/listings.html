<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Quản lý mục cho thuê của bạn</title>

        <link
            rel="stylesheet"
            type="text/css"
            th:href="@{/webjars/bootstrap/css/bootstrap.min.css}"
        />

        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
            rel="stylesheet"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
            rel="stylesheet"
        />
        <div th:replace="header :: css"></div>
        <link rel="stylesheet" th:href="@{/css/hosting/listings.css}" />
    </head>

    <body>
        <div th:replace="header :: content"></div>

        <main>
            <div class="listings__container">
                <div class="listings__header flex">
                    <div class="listings__header-rooms-length">
                        [[${roomsLength}]] nhà/phòng cho thuê
                    </div>
                    <div>
                        <button
                            class="listings__create-new-room"
                            onclick="createNewRoom();"
                        >
                            <span>
                                <img
                                    th:src="@{/svg/plus.svg}"
                                    alt=""
                                    width="16px"
                                    height="16px"
                                    style="object-fit: cover"
                                />
                            </span>
                            <div style="margin-left: 10px">
                                Tạo mục cho thuê
                            </div>
                        </button>
                    </div>
                </div>
                <div class="listings__filter-container">
                    <div class="listings__search-room">
                        <div class="listings__search-icon-container">
                            <img
                                th:src="@{/svg/search.svg}"
                                alt=""
                                width="12px"
                                height="12px"
                            />
                        </div>
                        <div style="flex: 1">
                            <input
                                type="text"
                                placeholder="Tìm kiếm nhà/phòng cho thuê"
                                id="listings__search-input"
                            />
                        </div>
                    </div>
                    <div class="listings__filter">
                        <button class="listings__filter-option">
                            <span> Phòng và phòng ngủ</span>
                            <div class="listings__filter-img-container">
                                <img
                                    th:src="@{/svg/dropdown.svg}"
                                    alt=""
                                    width="12px"
                                    height="12px"
                                />
                            </div>
                        </button>
                        <div id="listings__filter-roomAndBedRoom">
                            <div class="filter-box" style="flex: 1">
                                <div
                                    class="
                                        flex
                                        listings__filter-roomAndBedRoom-row
                                    "
                                >
                                    <div>Phòng ngủ</div>
                                    <div>
                                        <button class="listings__minus-btn">
                                            <span>
                                                <img
                                                    th:src="@{/svg/minus.svg}"
                                                    alt=""
                                                    width="12px"
                                                    height="12px"
                                                />
                                            </span>
                                        </button>
                                        <span
                                            id="listings__bed-room-count"
                                            class="filter-count"
                                            >0</span
                                        >
                                        <button class="listings__plus-btn">
                                            <span>
                                                <img
                                                    th:src="@{/svg/plus.svg}"
                                                    alt=""
                                                    width="12px"
                                                    height="12px"
                                            /></span>
                                        </button>
                                    </div>
                                </div>
                                <div
                                    class="
                                        flex
                                        listings__filter-roomAndBedRoom-row
                                    "
                                >
                                    <div>Giường</div>
                                    <div>
                                        <button class="listings__minus-btn">
                                            <span>
                                                <img
                                                    th:src="@{/svg/minus.svg}"
                                                    alt=""
                                                    width="12px"
                                                    height="12px"
                                                />
                                            </span>
                                        </button>
                                        <span
                                            id="listings__bed-count"
                                            class="filter-count"
                                            >0</span
                                        >
                                        <button class="listings__plus-btn">
                                            <span>
                                                <img
                                                    th:src="@{/svg/plus.svg}"
                                                    alt=""
                                                    width="14px"
                                                    height="14px"
                                            /></span>
                                        </button>
                                    </div>
                                </div>
                                <div
                                    class="
                                        flex
                                        listings__filter-roomAndBedRoom-row
                                    "
                                >
                                    <div>Phòng tắm</div>
                                    <div>
                                        <button class="listings__minus-btn">
                                            <span>
                                                <img
                                                    th:src="@{/svg/minus.svg}"
                                                    alt=""
                                                    width="14px"
                                                    height="14px"
                                                />
                                            </span>
                                        </button>
                                        <span
                                            id="listings__bath-room-count"
                                            class="filter-count"
                                            >0</span
                                        >
                                        <button class="listings__plus-btn">
                                            <span>
                                                <img
                                                    th:src="@{/svg/plus.svg}"
                                                    alt=""
                                                    width="14px"
                                                    height="14px"
                                            /></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div
                                th:replace="hosting/_listings_partial :: filterFooter"
                            ></div>
                        </div>
                    </div>
                    <div class="listings__filter">
                        <button class="listings__filter-option">
                            <span>Tiện nghi</span>
                            <div class="listings__filter-img-container">
                                <img
                                    th:src="@{/svg/dropdown.svg}"
                                    alt=""
                                    width="12px"
                                    height="12px"
                                />
                            </div>
                        </button>
                        <div id="listings__filter-amentities">
                            <div class="filter-box grid-2" style="flex: 1">
                                <th:block th:each="amentity : ${amentities}">
                                    <div
                                        class="listings__filter-amentities-row"
                                        style="
                                            display: flex;
                                            align-items: center;
                                        "
                                    >
                                        <div class="flex-2">
                                            <input
                                                type="checkbox"
                                                width="20px"
                                                height="20px"
                                            />
                                        </div>
                                        <div
                                            style="
                                                font-size: 14px;
                                                margin-left: 8px;
                                                height: 35px;
                                            "
                                            class="flex-2"
                                        >
                                            [[${amentity.name}]]
                                        </div>
                                    </div>
                                </th:block>
                            </div>
                            <div
                                th:replace="hosting/_listings_partial :: filterFooter"
                            ></div>
                        </div>
                    </div>
                    <div class="listings__filter">
                        <button class="listings__filter-option">
                            <span>Tình trạng nhà/phòng cho thuê</span>
                            <div class="listings__filter-img-container">
                                <img
                                    th:src="@{/svg/dropdown.svg}"
                                    alt=""
                                    width="12px"
                                    height="12px"
                                />
                            </div>
                        </button>
                    </div>
                    <div class="listings__filter">
                        <button class="listings__filter-option">
                            <span>Các bộ lọc khác</span>
                            <div class="listings__filter-img-container">
                                <img
                                    th:src="@{/svg/dropdown.svg}"
                                    alt=""
                                    width="12px"
                                    height="12px"
                                />
                            </div>
                        </button>
                    </div>
                </div>
                <div>
                    <table id="table">
                        <thead>
                            <tr>
                                <th>
                                    <div style="padding: 8px">
                                        <input type="checkbox" />
                                    </div>
                                </th>
                                <th>
                                    <div>
                                        <button class="listings__table-header">
                                            <div>NHÀ/PHÒNG CHO THUÊ</div>
                                            <div
                                                class="
                                                    listings__fiter-icon-container
                                                "
                                            >
                                                <span class="upper"> </span>
                                                <span class="downer"></span>
                                            </div>
                                        </button>
                                    </div>
                                </th>
                                <th>
                                    <div>
                                        <button class="listings__table-header">
                                            <div>TRẠNG THÁI</div>
                                            <div
                                                class="
                                                    listings__fiter-icon-container
                                                "
                                            >
                                                <span class="upper"> </span>
                                                <span class="downer"></span>
                                            </div>
                                        </button>
                                    </div>
                                </th>
                                <th>
                                    <div>
                                        <button class="listings__table-header">
                                            <div>VIỆC CẦN LÀM</div>
                                        </button>
                                    </div>
                                </th>
                                <th>
                                    <div>
                                        <button class="listings__table-header">
                                            <div>ĐẶT NGAY</div>
                                            <div
                                                class="
                                                    listings__fiter-icon-container
                                                "
                                            >
                                                <span class="upper"> </span>
                                                <span class="downer"></span>
                                            </div>
                                        </button>
                                    </div>
                                </th>
                                <th>
                                    <div>
                                        <button class="listings__table-header">
                                            <div>PHÒNG NGỦ</div>
                                            <div
                                                class="
                                                    listings__fiter-icon-container
                                                "
                                            >
                                                <span class="upper"> </span>
                                                <span class="downer"></span>
                                            </div>
                                        </button>
                                    </div>
                                </th>
                                <th>
                                    <div>
                                        <button class="listings__table-header">
                                            <div>GIƯỜNG</div>
                                            <div
                                                class="
                                                    listings__fiter-icon-container
                                                "
                                            >
                                                <span class="upper"> </span>
                                                <span class="downer"></span>
                                            </div>
                                        </button>
                                    </div>
                                </th>
                                <th>
                                    <div>
                                        <button class="listings__table-header">
                                            <div>PHÒNG TẮM</div>
                                            <div
                                                class="
                                                    listings__fiter-icon-container
                                                "
                                            >
                                                <span class="upper"> </span>
                                                <span class="downer"></span>
                                            </div>
                                        </button>
                                    </div>
                                </th>
                                <th>
                                    <div>
                                        <button class="listings__table-header">
                                            <div>VỊ TRÍ</div>
                                            <div
                                                class="
                                                    listings__fiter-icon-container
                                                "
                                            >
                                                <span class="upper"> </span>
                                                <span class="downer"></span>
                                            </div>
                                        </button>
                                    </div>
                                </th>
                                <th>
                                    <div>
                                        <button class="listings__table-header">
                                            <div>SỬA ĐỔI LẦN CUỐI</div>
                                            <div
                                                class="
                                                    listings__fiter-icon-container
                                                "
                                            >
                                                <span class="upper"> </span>
                                                <span class="downer"></span>
                                            </div>
                                        </button>
                                    </div>
                                </th>
                                <th>
                                    <div>
                                        <img
                                            th:src="@{/svg/setting.svg}"
                                            alt=""
                                            width="20px"
                                            height="20px"
                                        />
                                    </div>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <th:block th:each="room : ${rooms}">
                                <tr>
                                    <td>
                                        <div style="text-align: center">
                                            <input type="checkbox" />
                                        </div>
                                    </td>
                                    <td>
                                        <div
                                            style="
                                                display: flex;
                                                align-items: center;
                                            "
                                        >
                                            <div
                                                style="
                                                    width: 56px;
                                                    height: 40px;
                                                "
                                            >
                                                <img
                                                    th:src="@{'/room_images/' + ${userEmail + '/' + room.thumbnail}}"
                                                    alt="Room's thumbnail'"
                                                    class="
                                                        listings__room-thumbnail
                                                    "
                                                    th:if="${room.thumbnail != null}"
                                                />
                                                <img
                                                    th:src="@{'/room_images/' + ${userEmail + '/' + room.images[0].image}}"
                                                    alt="Room's thumbnail'"
                                                    class="
                                                        listings__room-thumbnail
                                                    "
                                                    th:if="${room.thumbnail == null}"
                                                />
                                            </div>
                                            <div class="listings__room-name">
                                                [[${room.name}]]
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div
                                            style="
                                                display: flex;
                                                align-items: center;
                                                height: 100%;
                                            "
                                        >
                                            <div>
                                                <img src="" alt="" />
                                            </div>
                                            <div
                                                th:text="${room.status == true} ? 'Hoàn thành' : 'Đang tiến hành'"
                                            ></div>
                                        </div>
                                    </td>
                                    <td>
                                        <button
                                            class="
                                                listings__complete-room-making
                                                listings__td-text
                                            "
                                        >
                                            Hoàn thành
                                        </button>
                                    </td>
                                    <td>
                                        <div
                                            style="
                                                display: flex;
                                                align-items: center;
                                            "
                                        >
                                            <div>
                                                <img
                                                    th:src="@{/svg/complete.svg}"
                                                    alt=""
                                                    width="16px"
                                                    height="16px"
                                                />
                                            </div>
                                            <div style="margin-left: 8px">
                                                Bật
                                            </div>
                                        </div>
                                    </td>
                                    <td class="listings__td-text">
                                        [[${room.bedroomCount}]]
                                    </td>
                                    <td class="listings__td-text">
                                        [[${room.bedCount}]]
                                    </td>
                                    <td class="listings__td-text">
                                        [[${room.bathroomCount}]]
                                    </td>
                                    <td class="listings__td-text">
                                        [[${room.city.name}]],
                                        [[${room.state.name}]],
                                        [[${room.country.name}]]
                                    </td>
                                    <td class="listings__td-text">
                                        [[${room.calculateHowManyDaysFromPastToCurrent()}]]
                                        ngày trước
                                    </td>
                                </tr>
                            </th:block>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>

        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script
            type="text/javascript"
            th:src="@{/webjars/jquery/jquery.min.js}"
        ></script>
        <div th:replace="header :: javascript"></div>
        <script th:inline="javascript">
            /*<![CDATA[*/
            const baseURL = /*[[@{/}]]*/ 'default';
            /*]]>*/
        </script>
        <script>
            jQuery(document).ready(function () {});

            function createNewRoom() {
                window.location.href = `${baseURL}become-a-host/`;
            }
        </script>
    </body>
</html>
